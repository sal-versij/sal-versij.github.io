<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Smistagram</title>
	<link rel="stylesheet" href="//stackedit.io/style.css" />
	<link rel="stylesheet" href="//stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" crossorigin="anonymous">
	<style>
		.h1, .h2, h1, h2 {
			margin-bottom: 1.5rem !important;
		}
		
		.stackedit__html {
			margin-bottom: 180px;
			margin-left: auto;
			margin-right: auto;
			padding-left: 30px;
			padding-right: 30px;
			max-width: unset !important;
		}
	</style>
</head>
<body class="stackedit">
<div class="stackedit__left">
	<div class="stackedit__toc">
		
<ul>
<li><a href="#smistagram-project">Smistagram Project</a>
<ul>
<li><a href="#sequence-diagrams">Sequence Diagrams</a>
<ul>
<li><a href="#user-sign-in-dynamics-usd">User Sign-in Dynamics (USD)</a></li>
<li><a href="#user---bot-dynamics-ubd">User - Bot Dynamics (UBD)</a></li>
<li><a href="#bot-manager-main-loop-bmml">Bot Manager Main Loop (BMML)</a></li>
</ul>
</li>
<li><a href="#functions">Functions</a>
<ul>
<li><a href="#web-services">Web Services</a></li>
<li><a href="#internal-services">Internal Services</a></li>
</ul>
</li>
<li><a href="#database">Database</a></li>
</ul>
</li>
</ul>

	</div>
</div>
<div class="stackedit__right">
	<div class="stackedit__html">
		<h1 id="smistagram-project">Smistagram Project</h1>
<h2 id="sequence-diagrams">Sequence Diagrams</h2>
<h3 id="user-sign-in-dynamics-usd">User Sign-in Dynamics (<code>USD</code>)</h3>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-wXlylChhLimSrFIE" height="100%" width="100%" style="max-width:1650px;" viewBox="-50 -10 1650 1230"><g></g><g><line id="actor197" x1="75" y1="5" x2="75" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">Site2</tspan></text></g><g><line id="actor198" x1="275" y1="5" x2="275" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">Site1</tspan></text></g><g><line id="actor199" x1="475" y1="5" x2="475" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">WSC</tspan></text></g><g><line id="actor200" x1="675" y1="5" x2="675" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="600" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="675" dy="0">User</tspan></text></g><g><line id="actor201" x1="875" y1="5" x2="875" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="800" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="875" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="875" dy="0">Smistagram Web</tspan></text></g><g><line id="actor202" x1="1075" y1="5" x2="1075" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1000" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1075" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="1075" dy="0">UIS</tspan></text></g><g><line id="actor203" x1="1275" y1="5" x2="1275" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="1275" dy="0">Bot Manager</tspan></text></g><g><line id="actor204" x1="1475" y1="5" x2="1475" y2="1219" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="1400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="1475" dy="0">WSB</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="670" y="67" fill="#f4f4f4" stroke="#666" width="10" height="1067" rx="0" ry="0"></rect></g><g><text x="472.5" y="93" class="messageText" style="text-anchor: middle;">Richiede Accesso al canale</text><line x1="670" y1="100" x2="275" y2="100" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="102" fill="#f4f4f4" stroke="#666" width="10" height="147" rx="0" ry="0"></rect></g><g><text x="377.5" y="128" class="messageText" style="text-anchor: middle;">Richiede Token temporaneo per iscrizione</text><line x1="280" y1="135" x2="475" y2="135" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="250" y="145" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="246" y="169" fill="black" class="noteText"><tspan x="266" fill="black">RetrieveToken(Secret Key, Channel)</tspan></text></g><g><text x="377.5" y="207" class="messageText" style="text-anchor: middle;">Restituisce un token temporaneo associato ad un canale</text><line x1="475" y1="214" x2="280" y2="214" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="475" y="242" class="messageText" style="text-anchor: middle;">Restituisce un redirect a Smistagram Web contenente il token</text><line x1="280" y1="249" x2="670" y2="249" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="777.5" y="277" class="messageText" style="text-anchor: middle;">Si collega e si registra</text><line x1="680" y1="284" x2="875" y2="284" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="870" y="286" fill="#f4f4f4" stroke="#666" width="10" height="191" rx="0" ry="0"></rect></g><g><rect x="650" y="294" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="646" y="318" fill="black" class="noteText"><tspan x="666" fill="black">RegisterUser(...data)</tspan></text></g><g><text x="977.5" y="356" class="messageText" style="text-anchor: middle;">Associa L'utente al canale 1</text><line x1="880" y1="363" x2="1075" y2="363" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="1070" y="365" fill="#f4f4f4" stroke="#666" width="10" height="77" rx="0" ry="0"></rect></g><g><rect x="850" y="373" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="846" y="397" fill="black" class="noteText"><tspan x="866" fill="black">PairUser_Channel(user, channel</tspan></text></g><g><text x="975" y="435" class="messageText" style="text-anchor: middle;">Ritorna l'esito</text><line x1="1070" y1="442" x2="880" y2="442" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="775" y="470" class="messageText" style="text-anchor: middle;">Restituisce un collegamento al bot per eseguire l'associazione</text><line x1="870" y1="477" x2="680" y2="477" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="977.5" y="505" class="messageText" style="text-anchor: middle;">Si collega e associa l'account</text><line x1="680" y1="512" x2="1275" y2="512" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="1270" y="514" fill="#f4f4f4" stroke="#666" width="10" height="182" rx="0" ry="0"></rect></g><g><text x="1377.5" y="540" class="messageText" style="text-anchor: middle;">Richiede l'associazione</text><line x1="1280" y1="547" x2="1475" y2="547" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="1470" y="549" fill="#f4f4f4" stroke="#666" width="10" height="147" rx="0" ry="0"></rect></g><g><rect x="1250" y="557" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="1246" y="581" fill="black" class="noteText"><tspan x="1266" fill="black">PairAccount(account, token)</tspan></text></g><g><text x="1375" y="619" class="messageText" style="text-anchor: middle;">Notifica cambiamento</text><line x1="1470" y1="626" x2="1280" y2="626" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="975" y="654" class="messageText" style="text-anchor: middle;">Invia un messaggio notificando la riuscita dell'associazione del canale con un collegamento al canale</text><line x1="1270" y1="661" x2="680" y2="661" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="1375" y="689" class="messageText" style="text-anchor: middle;">Ritorna esito</text><line x1="1470" y1="696" x2="1280" y2="696" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="372.5" y="724" class="messageText" style="text-anchor: middle;">Richiede Accesso al canale</text><line x1="670" y1="731" x2="75" y2="731" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="70" y="733" fill="#f4f4f4" stroke="#666" width="10" height="147" rx="0" ry="0"></rect></g><g><text x="277.5" y="759" class="messageText" style="text-anchor: middle;">Richiede Token temporaneo per iscrizione</text><line x1="80" y1="766" x2="475" y2="766" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="50" y="776" fill="#EDF2AE" stroke="#666" width="450" height="34" rx="0" ry="0" class="note"></rect><text x="46" y="800" fill="black" class="noteText"><tspan x="66" fill="black">RetrieveToken(Secret Key, Channel)</tspan></text></g><g><text x="277.5" y="838" class="messageText" style="text-anchor: middle;">Restituisce un token temporaneo associato ad un canale</text><line x1="475" y1="845" x2="80" y2="845" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="873" class="messageText" style="text-anchor: middle;">Restituisce un redirect a Smistagram Web contenente il token</text><line x1="80" y1="880" x2="670" y2="880" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="777.5" y="908" class="messageText" style="text-anchor: middle;">Si collega e accede perchè gia registrato ed associato</text><line x1="680" y1="915" x2="875" y2="915" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="870" y="917" fill="#f4f4f4" stroke="#666" width="10" height="217" rx="0" ry="0"></rect></g><g><text x="977.5" y="943" class="messageText" style="text-anchor: middle;">Associa L'utente al canale 2</text><line x1="880" y1="950" x2="1075" y2="950" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="850" y="960" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="846" y="984" fill="black" class="noteText"><tspan x="866" fill="black">PairUser_Channel(user, channel</tspan></text></g><g><text x="977.5" y="1022" class="messageText" style="text-anchor: middle;">Ritorna l'esito</text><line x1="1075" y1="1029" x2="880" y2="1029" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="1375" y="1057" class="messageText" style="text-anchor: middle;">Notifica cambiamento</text><line x1="1475" y1="1064" x2="1275" y2="1064" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="1270" y="1066" fill="#f4f4f4" stroke="#666" width="10" height="33" rx="0" ry="0"></rect></g><g><text x="975" y="1092" class="messageText" style="text-anchor: middle;">Invia un messaggio notificando la riuscita dell'associazione del canale con un collegamento al canale</text><line x1="1270" y1="1099" x2="680" y2="1099" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="775" y="1127" class="messageText" style="text-anchor: middle;">Redirect al sito 2</text><line x1="870" y1="1134" x2="680" y2="1134" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="0" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">Site2</tspan></text></g><g><rect x="200" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">Site1</tspan></text></g><g><rect x="400" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">WSC</tspan></text></g><g><rect x="600" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="675" dy="0">User</tspan></text></g><g><rect x="800" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="875" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="875" dy="0">Smistagram Web</tspan></text></g><g><rect x="1000" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1075" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="1075" dy="0">UIS</tspan></text></g><g><rect x="1200" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1275" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="1275" dy="0">Bot Manager</tspan></text></g><g><rect x="1400" y="1154" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="1475" y="1186.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="1475" dy="0">WSB</tspan></text></g></svg></div>
<hr>
<h3 id="user---bot-dynamics-ubd">User - Bot Dynamics (<code>UBD</code>)</h3>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-CX1tz2hKUfGSDRuG" height="100%" width="100%" style="max-width:850px;" viewBox="-50 -10 850 1268"><g></g><g><line id="actor205" x1="75" y1="5" x2="75" y2="1257" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">User</tspan></text></g><g><line id="actor206" x1="275" y1="5" x2="275" y2="1257" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">Bot</tspan></text></g><g><line id="actor207" x1="475" y1="5" x2="475" y2="1257" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">Bot Manager</tspan></text></g><g><line id="actor208" x1="675" y1="5" x2="675" y2="1257" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="600" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="675" dy="0">WSB</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><text x="575" y="118" class="messageText" style="text-anchor: middle;">Notification</text><line x1="675" y1="125" x2="475" y2="125" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><rect x="450" y="135" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="446" y="159" fill="black" class="noteText"><tspan x="466" fill="black">WSBupdates DB, Bot Manager react</tspan></text></g><g><line x1="440" y1="75" x2="710" y2="75" class="loopLine"></line><line x1="710" y1="75" x2="710" y2="179" class="loopLine"></line><line x1="440" y1="179" x2="710" y2="179" class="loopLine"></line><line x1="440" y1="75" x2="440" y2="179" class="loopLine"></line><polygon points="440,75 490,75 490,88 481.6,95 440,95" class="labelBox"></polygon><text x="447.5" y="90" fill="black" class="labelText"><tspan x="447.5" fill="black">opt</tspan></text><text x="575" y="90" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="575" fill="black">[ Notification ]</tspan></text></g><g><text x="175" y="232" class="messageText" style="text-anchor: middle;">/info</text><line x1="75" y1="239" x2="275" y2="239" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="241" fill="#f4f4f4" stroke="#666" width="10" height="103" rx="0" ry="0"></rect></g><g><text x="377.5" y="267" class="messageText" style="text-anchor: middle;">Request</text><line x1="280" y1="274" x2="475" y2="274" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="470" y="276" fill="#f4f4f4" stroke="#666" width="10" height="33" rx="0" ry="0"></rect></g><g><text x="375" y="302" class="messageText" style="text-anchor: middle;">Response</text><line x1="470" y1="309" x2="280" y2="309" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="172.5" y="337" class="messageText" style="text-anchor: middle;">Send to User</text><line x1="270" y1="344" x2="75" y2="344" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="392" class="messageText" style="text-anchor: middle;">/channels</text><line x1="75" y1="399" x2="275" y2="399" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="401" fill="#f4f4f4" stroke="#666" width="10" height="217" rx="0" ry="0"></rect></g><g><text x="377.5" y="427" class="messageText" style="text-anchor: middle;">Request</text><line x1="280" y1="434" x2="475" y2="434" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="470" y="436" fill="#f4f4f4" stroke="#666" width="10" height="147" rx="0" ry="0"></rect></g><g><text x="577.5" y="462" class="messageText" style="text-anchor: middle;">Retrieve Channels</text><line x1="480" y1="469" x2="675" y2="469" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="670" y="471" fill="#f4f4f4" stroke="#666" width="10" height="77" rx="0" ry="0"></rect></g><g><rect x="450" y="479" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="446" y="503" fill="black" class="noteText"><tspan x="466" fill="black">GetChannelsByAccount(id)</tspan></text></g><g><text x="575" y="541" class="messageText" style="text-anchor: middle;">return channels</text><line x1="670" y1="548" x2="480" y2="548" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="576" class="messageText" style="text-anchor: middle;">Response</text><line x1="470" y1="583" x2="280" y2="583" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="172.5" y="611" class="messageText" style="text-anchor: middle;">Send to User</text><line x1="270" y1="618" x2="75" y2="618" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="666" class="messageText" style="text-anchor: middle;">/profile [?]</text><line x1="75" y1="673" x2="275" y2="673" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="721" class="messageText" style="text-anchor: middle;">/options [?]</text><line x1="75" y1="728" x2="275" y2="728" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><text x="175" y="776" class="messageText" style="text-anchor: middle;">/help</text><line x1="75" y1="783" x2="275" y2="783" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="785" fill="#f4f4f4" stroke="#666" width="10" height="103" rx="0" ry="0"></rect></g><g><text x="377.5" y="811" class="messageText" style="text-anchor: middle;">Request</text><line x1="280" y1="818" x2="475" y2="818" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="470" y="820" fill="#f4f4f4" stroke="#666" width="10" height="33" rx="0" ry="0"></rect></g><g><text x="375" y="846" class="messageText" style="text-anchor: middle;">Response</text><line x1="470" y1="853" x2="280" y2="853" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="172.5" y="881" class="messageText" style="text-anchor: middle;">Send to User</text><line x1="270" y1="888" x2="75" y2="888" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="175" y="936" class="messageText" style="text-anchor: middle;">&lt;token&gt;</text><line x1="75" y1="943" x2="275" y2="943" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="270" y="945" fill="#f4f4f4" stroke="#666" width="10" height="217" rx="0" ry="0"></rect></g><g><text x="377.5" y="971" class="messageText" style="text-anchor: middle;">Request</text><line x1="280" y1="978" x2="475" y2="978" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="470" y="980" fill="#f4f4f4" stroke="#666" width="10" height="147" rx="0" ry="0"></rect></g><g><text x="577.5" y="1006" class="messageText" style="text-anchor: middle;">Request token handling</text><line x1="480" y1="1013" x2="675" y2="1013" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="670" y="1015" fill="#f4f4f4" stroke="#666" width="10" height="77" rx="0" ry="0"></rect></g><g><rect x="450" y="1023" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="446" y="1047" fill="black" class="noteText"><tspan x="466" fill="black">PairAccount(account, token)</tspan></text></g><g><text x="575" y="1085" class="messageText" style="text-anchor: middle;">Return result</text><line x1="670" y1="1092" x2="480" y2="1092" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="375" y="1120" class="messageText" style="text-anchor: middle;">Response</text><line x1="470" y1="1127" x2="280" y2="1127" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="172.5" y="1155" class="messageText" style="text-anchor: middle;">Send to User</text><line x1="270" y1="1162" x2="75" y2="1162" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><line x1="65" y1="189" x2="710" y2="189" class="loopLine"></line><line x1="710" y1="189" x2="710" y2="1172" class="loopLine"></line><line x1="65" y1="1172" x2="710" y2="1172" class="loopLine"></line><line x1="65" y1="189" x2="65" y2="1172" class="loopLine"></line><line x1="65" y1="354" x2="710" y2="354" class="loopLine" style="stroke-dasharray: 3, 3;"></line><line x1="65" y1="628" x2="710" y2="628" class="loopLine" style="stroke-dasharray: 3, 3;"></line><line x1="65" y1="683" x2="710" y2="683" class="loopLine" style="stroke-dasharray: 3, 3;"></line><line x1="65" y1="738" x2="710" y2="738" class="loopLine" style="stroke-dasharray: 3, 3;"></line><line x1="65" y1="898" x2="710" y2="898" class="loopLine" style="stroke-dasharray: 3, 3;"></line><polygon points="65,189 115,189 115,202 106.6,209 65,209" class="labelBox"></polygon><text x="72.5" y="204" fill="black" class="labelText"><tspan x="72.5" fill="black">alt</tspan></text><text x="387.5" y="204" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="387.5" fill="black">[ info ]</tspan></text><text x="387.5" y="369" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="387.5" fill="black">[ channels ]</tspan></text><text x="387.5" y="643" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="387.5" fill="black">[ profile  ]</tspan></text><text x="387.5" y="698" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="387.5" fill="black">[ options  ]</tspan></text><text x="387.5" y="753" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="387.5" fill="black">[ help ]</tspan></text><text x="387.5" y="913" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="387.5" fill="black">[ token ]</tspan></text></g><g><rect x="0" y="1192" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="1224.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">User</tspan></text></g><g><rect x="200" y="1192" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="1224.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">Bot</tspan></text></g><g><rect x="400" y="1192" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="1224.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">Bot Manager</tspan></text></g><g><rect x="600" y="1192" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="1224.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="675" dy="0">WSB</tspan></text></g></svg></div>
<hr>
<h3 id="bot-manager-main-loop-bmml">Bot Manager Main Loop (<code>BMML</code>)</h3>
<div class="mermaid"><svg xmlns="http://www.w3.org/2000/svg" id="mermaid-svg-c4Z05A0ZIeo5pRdD" height="100%" width="100%" style="max-width:850px;" viewBox="-50 -10 850 545"><g></g><g><line id="actor209" x1="75" y1="5" x2="75" y2="534" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">Bot</tspan></text></g><g><line id="actor210" x1="275" y1="5" x2="275" y2="534" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="200" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">Bot Manager</tspan></text></g><g><line id="actor211" x1="475" y1="5" x2="475" y2="534" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="400" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">WSB</tspan></text></g><g><line id="actor212" x1="675" y1="5" x2="675" y2="534" class="actor-line" stroke-width="0.5px" stroke="#999"></line><rect x="600" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="675" dy="0">Server IMAP</tspan></text></g><defs><marker id="arrowhead" refX="5" refY="2" markerWidth="6" markerHeight="4" orient="auto"><path d="M 0,0 V 4 L6,2 Z"></path></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"></path><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"></path></marker></defs><g><rect x="270" y="67" fill="#f4f4f4" stroke="#666" width="10" height="382" rx="0" ry="0"></rect></g><g><text x="280" y="93" class="messageText" style="text-anchor: middle;">Initialization</text><path d="M 280,100 C 340,90 340,130 280,120" class="messageLine0" stroke-width="2" stroke="black" style="fill: none;"></path></g><g><text x="377.5" y="183" class="messageText" style="text-anchor: middle;">Retrieve Channels</text><line x1="280" y1="190" x2="475" y2="190" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="470" y="192" fill="#f4f4f4" stroke="#666" width="10" height="77" rx="0" ry="0"></rect></g><g><rect x="250" y="200" fill="#EDF2AE" stroke="#666" width="250" height="34" rx="0" ry="0" class="note"></rect><text x="246" y="224" fill="black" class="noteText"><tspan x="266" fill="black">GetAllChannels()</tspan></text></g><g><text x="375" y="262" class="messageText" style="text-anchor: middle;">Return Result</text><line x1="470" y1="269" x2="280" y2="269" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="477.5" y="297" class="messageText" style="text-anchor: middle;">Retrieve unread e-mails</text><line x1="280" y1="304" x2="675" y2="304" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><rect x="670" y="306" fill="#f4f4f4" stroke="#666" width="10" height="33" rx="0" ry="0"></rect></g><g><text x="475" y="332" class="messageText" style="text-anchor: middle;"></text><line x1="670" y1="339" x2="280" y2="339" class="messageLine1" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"></line></g><g><text x="280" y="367" class="messageText" style="text-anchor: middle;">Elaborate e-mails</text><path d="M 280,374 C 340,364 340,404 280,394" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></path></g><g><text x="172.5" y="432" class="messageText" style="text-anchor: middle;">Send posts</text><line x1="270" y1="439" x2="75" y2="439" class="messageLine0" stroke-width="2" stroke="black" marker-end="url(#arrowhead)" style="fill: none;"></line></g><g><line x1="65" y1="140" x2="690" y2="140" class="loopLine"></line><line x1="690" y1="140" x2="690" y2="449" class="loopLine"></line><line x1="65" y1="449" x2="690" y2="449" class="loopLine"></line><line x1="65" y1="140" x2="65" y2="449" class="loopLine"></line><polygon points="65,140 115,140 115,153 106.6,160 65,160" class="labelBox"></polygon><text x="72.5" y="155" fill="black" class="labelText"><tspan x="72.5" fill="black">loop</tspan></text><text x="377.5" y="155" fill="black" class="loopText" style="text-anchor: middle;"><tspan x="377.5" fill="black">[ Main ]</tspan></text></g><g><rect x="0" y="469" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="75" y="501.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="75" dy="0">Bot</tspan></text></g><g><rect x="200" y="469" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="275" y="501.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="275" dy="0">Bot Manager</tspan></text></g><g><rect x="400" y="469" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="475" y="501.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="475" dy="0">WSB</tspan></text></g><g><rect x="600" y="469" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"></rect><text x="675" y="501.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle;"><tspan x="675" dy="0">Server IMAP</tspan></text></g></svg></div>
<hr>
<h2 id="functions">Functions</h2>
<h3 id="web-services">Web Services</h3>
<dl>
<dt>Legenda</dt>
<dd><code>+</code> Servizio accessibile online senza autenticazione</dd>
<dd><code>#</code> Servizio accessibile online con autenticazione</dd>
<dd><code>-</code> Servizio non accessibile online</dd>
<dt>Funzioni <abbr title="Web Service Bots">WSB</abbr></dt>
<dd>#<code>PairAccount</code>(<strong>account</strong>: <em>long</em>, <strong>token</strong>: <em>string</em>): <em>Result</em></dd>
<dd>+<code>GetAllChannels</code>(): <em>Channel</em>[0…]</dd>
<dd>#<code>GetChannelsByAccount</code>(<strong>account</strong>: <em>long</em>): <em>Channel</em>[0…]</dd>
<dt>Funzioni <abbr title="Web Service Channels">WSC</abbr></dt>
<dd>+<code>RetrieveToken</code>(<strong>secretKey</strong>: <em>string</em>, <strong>channel</strong>: <em>long</em>): <em>string</em></dd>
<dd>+<code>RetrieveInvitation</code>(<strong>secretKey</strong>: <em>string</em>, <strong>channel</strong>: <em>long</em>): <em>string</em></dd>
<dd>+<code>GetChannels</code>(<strong>secretKey</strong>: <em>string</em>): <em>Channel</em>[0…]</dd>
</dl>
<hr>
<h3 id="internal-services">Internal Services</h3>
<dl>
<dt>Funzioni <abbr title="Users Internal Services">UIS</abbr></dt>
<dd><code>RetrieveFromSession</code>(<em><strong>session</strong></em>: <em>HttpSession</em>): <em>User</em></dd>
<dd><code>GetByID</code>(<strong>id</strong>: <em>int</em>): <em>User</em></dd>
<dd><code>Login</code>(<em><strong>session</strong></em>: <em>HttpSession</em>, <strong>username</strong>: <em>string</em>, <strong>password</strong>:<em>string</em>): <strong>id</strong>: <em>int</em></dd>
<dd><code>Logout</code>(<em><strong>session</strong></em>: <em>HttpSession</em>): <em>Result</em></dd>
<dd><code>Register</code>(<strong>username</strong>: <em>string</em>, <strong>password</strong>: <em>string</em>, <sub>data…</sub>): <em>Result</em></dd>
<dd><code>Update</code>(<strong>user</strong>: <em>int</em>, <sub>data…</sub>): <em>Result</em></dd>
<dd><code>Remove</code>(<strong>user</strong>: <em>int</em>): <em>Result</em></dd>
<dd><code>Ban</code>(<strong>user</strong>: <em>int</em>, <strong>motivation</strong>: <em>string</em>): <em>Result</em> [???]</dd>
<dd><code>Pardon</code>(<strong>user</strong>: <em>int</em>): <em>Result</em> [???]</dd>
<dd><code>Deactivate</code>(<strong>user</strong>: <em>int</em>): <em>Result</em></dd>
<dd><code>Activate</code>(<strong>user</strong>: <em>int</em>): <em>Result</em></dd>
<dd><code>ChangePassword</code>(<strong>user</strong>: <em>int</em>, <strong>old</strong>: <em>string</em>, <strong>new</strong>: <em>string</em>): <em>Result</em></dd>
<dd><code>PairChannel</code>(<strong>user</strong>: <em>int</em>, <strong>channel</strong>: <em>long</em>): <em>Result</em></dd>
<dt>Funzioni <abbr title="Accounts Internal Services">AIS</abbr></dt>
<dd>—None—</dd>
<dt>Funzioni <abbr title="Players Internal Services">PIS</abbr></dt>
<dd><code>RetrieveFromSession</code>(<em><strong>session</strong></em>: <em>HttpSession</em>): <em>Player</em></dd>
<dd><code>GetByID</code>(<strong>id</strong>: <em>int</em>): <em>Player</em></dd>
<dd><code>Login</code>(<em><strong>session</strong></em>: <em>HttpSession</em>, <strong>username</strong>: <em>string</em>, <strong>password</strong>:<em>string</em>): <strong>id</strong>: <em>int</em></dd>
<dd><code>Logout</code>(<em><strong>session</strong></em>: <em>HttpSession</em>): <em>Result</em></dd>
<dd><code>Register</code>(<strong>username</strong>: <em>string</em>, <strong>password</strong>: <em>string</em>, <sub>data…</sub>): <em>Result</em></dd>
<dd><code>Update</code>(<strong>player</strong>: <em>int</em>, <sub>data…</sub>): <em>Result</em></dd>
<dd><code>Remove</code>(<strong>player</strong>: <em>int</em>): <em>Result</em></dd>
<dd><code>Deactivate</code>(<strong>player</strong>: <em>int</em>): <em>Result</em></dd>
<dd><code>Activate</code>(<strong>player</strong>: <em>int</em>): <em>Result</em></dd>
<dd><code>ChangePassword</code>(<strong>player</strong>: <em>int</em>, <strong>old</strong>: <em>string</em>, <strong>new</strong>: <em>string</em>): <em>Result</em></dd>
<dt>Funzioni <abbr title="Channels Internal Services">CIS</abbr></dt>
<dd>—None—</dd>
<dt>Funzioni <abbr title="Admins Internal Services">AdIS</abbr></dt>
<dd><code>RetrieveFromSession</code>(<em><strong>session</strong></em>: <em>HttpSession</em>): <em>Admin</em></dd>
<dd><code>GetByID</code>(<strong>id</strong>: <em>int</em>): <em>Admin</em></dd>
<dd><code>Login</code>(<em><strong>session</strong></em>: <em>HttpSession</em>, <strong>username</strong>: <em>string</em>, <strong>password</strong>:<em>string</em>): <strong>id</strong>: <em>int</em></dd>
<dd><code>Logout</code>(<em><strong>session</strong></em>: <em>HttpSession</em>): <em>Result</em></dd>
<dd><code>Register</code>(<strong>username</strong>: <em>string</em>, <strong>password</strong>: <em>string</em>, <sub>data…</sub>): <em>Result</em></dd>
<dd><code>Update</code>(<strong>player</strong>: <em>int</em>, <sub>data…</sub>): <em>Result</em></dd>
<dd><code>Remove</code>(<strong>player</strong>: <em>int</em>): <em>Result</em></dd>
<dd><code>ChangePassword</code>(<strong>player</strong>: <em>int</em>, <strong>old</strong>: <em>string</em>, <strong>new</strong>: <em>string</em>): <em>Result</em></dd>
</dl>
<hr>
<h2 id="database">Database</h2>
<iframe width="100%" height="750" src="https://dbdiagram.io/embed/5d5c1abaced98361d6ddc272"></iframe>

	</div>
</div>
<script src="//code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
</body>
</html>
